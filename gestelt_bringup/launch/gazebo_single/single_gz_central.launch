<launch>
  <!-- <arg name="num_drones" value="4"/> -->
  <arg name="rviz_config" default="default"/>
  <arg name="point_cloud_topic" value="camera/depth/points" />
  <arg name="point_cloud_topic_ds" value="camera/depth/points_downsampled" />

  <!-- swarm topic transmitter bridge-->
  <!-- This bridge subscribes to and re-broadcasts the trajectories of all drones -->
  <include file="$(find swarm_bridge)/launch/bridge_udp.launch">
    <arg name="drone_id" value="999"/>
    <arg name="broadcast_ip" value="127.0.0.255"/>
  </include>

  <!-- Collision checker -->
  <!-- <node pkg="central_benchmark" type="swarm_collision_checker" 
    name="swarm_collision_checker" output="screen">
    <param name="~num_drones" value="$(arg num_drones)" />
    <param name="~collision_tolerance" value="0.6" />
    <param name="~check_collision_freq" value="10.0" />
  </node> -->

  <!-- drone 0: Downsamples the input cloud -->
  <node pkg="central_benchmark" type="cloud_downsampler" 
    name="drone0_cloud_downsampler" output="screen">
    <param name="~queue_size" value="5" />
    <param name="~voxel_size" value="0.1" />

    <remap from="~cloud_in" to="/drone0/$(arg point_cloud_topic)" />
    <remap from="~cloud_out" to="/drone0/$(arg point_cloud_topic_ds)" />
  </node>

  <!-- RVIZ -->
  <node name="rviz" pkg="rviz" type="rviz" required="true" 
    args="-d $(find gestelt_bringup)/launch/rviz/$(arg rviz_config).rviz"/>

</launch>
